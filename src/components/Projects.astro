---
import { siteConfig } from "../config";
const hasProjects = siteConfig.projects && siteConfig.projects.length > 0;

// Helper: detect publication type from link
function getPublicationLabel(link) {
  if (!link) return null;
  if (link.includes("wiley")) return "Wiley Journal";
  if (link.includes("springer")) return "Springer";
  if (link.includes("ieee")) return "IEEE";
  return "Published";
}
---
{hasProjects && (
  <section id="projects" class="reveal-up px-6 md:px-20 lg:px-32 py-24 bg-slate-950">

    <div class="max-w-6xl mx-auto">
      <!-- Section Heading -->
      <div class="mb-14">
        <h2 class="text-4xl md:text-5xl font-bold text-slate-100">
          Projects
        </h2>
        <div
          class="w-20 h-[4px] mt-3 rounded-full"
          style={`background-color: ${siteConfig.accentColor}`}
        ></div>
      </div>

      <div class="space-y-12">

        {siteConfig.projects.map((project, index) => {
          const publication = getPublicationLabel(project.link);
          const Component = project.link ? "a" : "div";
          const linkProps = project.link
            ? { href: project.link, target: "_blank", rel: "noopener noreferrer" }
            : {};

          return (
            <Component
              {...linkProps}
              class="block bg-slate-900 border border-slate-800 rounded-xl p-6 md:p-8 transition-all hover:border-indigo-400 hover:shadow-lg hover:shadow-indigo-500/10"
            >
              <!-- Title + Badge -->
              <div class="flex flex-col md:flex-row md:justify-between md:items-start gap-4">

                <div class="flex items-center gap-3">
                  <span class="accent-mono text-base md:text-lg">0{index + 1}</span>
                  <h3 class="text-xl md:text-2xl font-semibold text-slate-100">
                    {project.name}
                  </h3>
                </div>

                {publication && (
                  <span class="accent-mono text-xs px-3 py-1 rounded-md bg-indigo-500/15 border border-indigo-400/40">
                    {publication}
                  </span>
                )}
              </div>

              <!-- Description -->
              <p class="mt-4 text-sm md:text-base text-slate-300 leading-relaxed">
                {project.description}
              </p>

              <!-- Tech Stack -->
              {project.skills?.length > 0 && (
                <div class="flex flex-wrap gap-2 mt-6">
                  {project.skills.map((skill) => (
                    <span class="accent-mono px-3 py-1 text-xs md:text-sm rounded-md bg-slate-800 border border-slate-700 hover:border-indigo-400 hover:text-indigo-300 transition-colors">
                      {skill}
                    </span>
                  ))}
                </div>
              )}

            </Component>
          );
        })}

      </div>
    </div>
  </section>
)}
