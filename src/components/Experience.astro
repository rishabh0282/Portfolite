---
import { siteConfig } from "../config";
import { IconBuildingSkyscraper, IconBrain, IconBug } from "@tabler/icons-react";

const hasExperience = siteConfig.experience && siteConfig.experience.length > 0;

function getCompanyIcon(company) {
  if (company.includes("IBM")) return IconBuildingSkyscraper;
  if (company.includes("Collaborative")) return IconBrain;
  if (company.includes("Conduent")) return IconBug;
  return null;
}
---

{hasExperience && (
  <section id="experience" class="reveal-up px-6 md:px-20 lg:px-32 py-24 bg-slate-950">
    <div class="max-w-6xl mx-auto">

      <!-- Section Heading -->
      <div class="mb-14">
        <h2 class="text-4xl md:text-5xl font-bold text-slate-100">
          Experience
        </h2>
        <div
          class="w-20 h-[4px] mt-3 rounded-full"
          style={`background-color: ${siteConfig.accentColor}`}
        ></div>
      </div>

      <!-- Timeline Container -->
      <div class="relative border-l border-slate-800 pl-6 space-y-14">
        {siteConfig.experience.map((exp) => {
          const CompanyIcon = getCompanyIcon(exp.company);

          return (
            <div class="relative">
              <!-- Timeline Accent Icon -->
              <span class="absolute -left-[18px] flex items-center justify-center w-8 h-8 rounded-full border-2 border-white bg-slate-950">
                {CompanyIcon && <CompanyIcon size={18} stroke={2} class="text-indigo-400" />}
              </span>

              <!-- Experience Card -->
              <div class="bg-slate-900 border border-slate-800 rounded-xl p-6 md:p-7 hover:border-indigo-400 hover:shadow-lg hover:shadow-indigo-500/10 transition-all">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
                  <div>
                    <h3 class="text-xl font-semibold text-slate-100">
                      {exp.title}
                    </h3>
                    <p class="accent-mono text-sm md:text-base mt-1">
                      {exp.company}
                    </p>
                  </div>

                  <span class="accent-mono text-xs sm:text-sm mt-1 sm:mt-0">
                    {exp.dateRange}
                  </span>
                </div>

                <ul class="mt-5 space-y-2 text-slate-300">
                  {exp.bullets.map((bullet) => (
                    <li class="flex items-start text-sm md:text-base">
                      <span class="w-2 h-2 rounded-full mt-2 mr-3" style={`background-color: ${siteConfig.accentColor}`}></span>
                      <span>{bullet}</span>
                    </li>
                  ))}
                </ul>
              </div>
            </div>
          );
        })}
      </div>
    </div>
  </section>
)}
